
<h3>Open a file</h3>
The first operation generally performed on an object of one of these classes is to associate it to a real file. This procedure is known as to <i>open a file</i>. An open file is represented within a program by a <i>stream</i> (i.e., an object of one of these classes; in the previous example, this was <code>myfile</code>) and any input or output operation performed on this stream object will be applied to the physical file associated to it.<br>
<br>
In order to open a file with a stream object we use its member function <code>open</code>:<br>
<br>
<code>
open (filename, mode);<br>
</code>
<br>
Where <code>filename</code> is a string representing the name of the file to be opened, and <code>mode</code> is an optional parameter with a combination of the following flags:<br>
<br>
<table class="boxed">
<tr><td><code>ios::in</code></td><td>Open for input operations.</td></tr>
<tr><td><code>ios::out</code></td><td>Open for output operations.</td></tr>
<tr><td><code>ios::binary</code></td><td>Open in binary mode.</td></tr>
<tr><td><code>ios::ate</code></td><td>Set the initial position at the end of the file.<br>
If this flag is not set, the initial position is the beginning of the file.</td></tr>
<tr><td><code>ios::app</code></td><td>All output operations are performed at the end of the file, appending the content to the current content of the file.</td></tr>
<tr><td><code>ios::trunc</code></td><td>If the file is opened for output operations and it already existed, its previous content is deleted and replaced by the new one.</td></tr>
</table>
<br>
All these flags can be combined using the bitwise operator OR (<code>|</code>). For example, if we want to open the file <code>example.bin</code> in binary mode to add data we could do it by the following call to member function <code>open</code>:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br></code></pre></td>
<td class="source"><pre><code>ofstream myfile;
myfile.open (<kbd>"example.bin"</kbd>, ios::out | ios::app | ios::binary); </code></pre></td></tr></table></div>
<br>
<br>
Each of the <code>open</code> member functions of classes <code>ofstream</code>, <code>ifstream</code> and <code>fstream</code> has a default mode that is used if the file is opened without a second argument:<br>
<br>
<table class="boxed">
<tr><th>class</th><th>default mode parameter</th></tr>
<tr><td><code>ofstream</code></td><td>ios::out</td></tr>
<tr><td><code>ifstream</code></td><td>ios::in</td></tr>
<tr><td><code>fstream</code></td><td>ios::in | ios::out</td></tr>
</table>
<br>
For <code>ifstream</code> and <code>ofstream</code> classes, <code>ios::in</code> and <code>ios::out</code> are automatically and respectively assumed, even if a mode that does not include them is passed as second argument to the <code>open</code> member function (the flags are combined).<br>
<br>
For <code>fstream</code>, the default value is only applied if the function is called without specifying any value for the mode parameter. If the function is called with any value in that parameter the default mode is overridden, not combined.<br>
<br>
File streams opened in <i>binary mode</i> perform input and output operations independently of any format considerations. Non-binary files are known as <i>text files</i>, and some translations may occur due to formatting of some special characters (like newline and carriage return characters).<br>
<br>
Since the first task that is performed on a file stream is generally to open a file, these three classes include a constructor that automatically calls the <code>open</code> member function and has the exact same parameters as this member. Therefore, we could also have declared the previous <code>myfile</code> object and conduct the same opening operation in our previous example by writing:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>&nbsp;</code></pre></td>
<td class="source"><pre><code>ofstream myfile (<kbd>"example.bin"</kbd>, ios::out | ios::app | ios::binary);</code></pre></td></tr></table></div>
<br>
<br>
Combining object construction and stream opening in a single statement. Both forms to open a file are valid and equivalent.<br>
<br>
To check if a file stream was successful opening a file, you can do it by calling to member <code>is_open</code>. This member function returns a <code>bool</code> value of <code>true</code> in the case that indeed the stream object is associated with an open file, or <code>false</code> otherwise:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>&nbsp;</code></pre></td>
<td class="source"><pre><code><var>if</var> (myfile.is_open()) { <cite>/* ok, proceed with output */</cite> }</code></pre></td></tr></table></div>
<br>
